version: '3.9'
services:
  r-runner:
    build:
      context: ..
      dockerfile: docker/Dockerfile.r-runner
    image: codex-r-runner:latest
    container_name: codex-r-runner
    working_dir: /workspace
    volumes:
      - ../tasks:/workspace/tasks
    stdin_open: true
    tty: true
    deploy:
      resources:
        limits:
          cpus: '2.0'
          memory: 4g
    environment:
      - CRAN_MIRROR=https://mirrors.tuna.tsinghua.edu.cn/CRAN
